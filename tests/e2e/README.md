# E2E тесты API для Quiz App

Этот каталог содержит end-to-end тесты для API Quiz App. Тесты проверяют все основные эндпоинты API и их функциональность.

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск тестов

### Запуск всех тестов

```bash
python run_all_tests.py
```

### Запуск с пользовательским URL

```bash
python run_all_tests.py --url http://example.com:8000
```

### Запуск только определенных тестов

```bash
# Только основные API тесты
python run_all_tests.py --only api

# Только административные API тесты
python run_all_tests.py --only admin

# Только Telegram API тесты
python run_all_tests.py --only telegram
```

### Дополнительные опции

```bash
# Подробный вывод
python run_all_tests.py --verbose

# Создание HTML-отчета
python run_all_tests.py --report

# Использование токенов авторизации
python run_all_tests.py --token YOUR_API_TOKEN --admin-token YOUR_ADMIN_TOKEN
```

## Структура тестов

- `test_api_e2e.py` - тесты для основных API эндпоинтов
- `test_admin_api_e2e.py` - тесты для административных API эндпоинтов
- `test_telegram_api_e2e.py` - тесты для Telegram API эндпоинтов
- `conftest.py` - общие фикстуры для всех тестов
- `run_all_tests.py` - скрипт для запуска всех тестов

## Переменные окружения

Вместо передачи аргументов командной строки, вы можете использовать переменные окружения:

- `API_URL` - URL API сервера
- `API_TOKEN` - токен для аутентификации
- `ADMIN_API_TOKEN` - токен с правами администратора
- `TEST_TELEGRAM_TOKEN` - токен Telegram бота для тестов

## Что тестируется

### Основные API тесты

- Регистрация и аутентификация пользователей
- Telegram аутентификация
- Получение и обновление профиля пользователя
- Проверка и валидация токенов
- Получение опросов и вопросов
- Создание ответов на вопросы
- Получение прогресса прохождения опроса
- Сбор данных о пользователе

### Административные API тесты

- Получение информации для админ-панели
- Получение и управление опросами
- Получение ответов и аналитики по опросам
- Управление пользователями и правами доступа
- Проверка состояния системы

### Telegram API тесты

- Проверка работоспособности Telegram интеграции
- Получение статуса Telegram бота
- Управление webhook настройками
- Проверка безопасности Telegram интеграции
- Отправка уведомлений
